{"version":3,"file":"make_runtime.js","sourceRoot":"","sources":["../../src/runtime/make_runtime.ts"],"names":[],"mappings":";;;AAOA,gDAAwD;AACxD,8CAAmD;AACnD,+CAA2C;AAEpC,KAAK,UAAU,WAAW,CAAC,EAChC,WAAW,EACX,MAAM,EACN,gBAAgB,EAChB,cAAc,EACd,KAAK,EACL,kBAAkB,EAClB,OAAO,GASR;IACC,MAAM,OAAO,GACX,OAAO,CAAC,QAAQ,GAAG,CAAC;QAClB,CAAC,CAAC,IAAI,6BAAmB,CACrB,WAAW,EACX,MAAM,EACN,gBAAgB,EAChB,OAAO,EACP,kBAAkB,CACnB;QACH,CAAC,CAAC,IAAI,0BAAgB,CAClB,gBAAgB,EAChB,KAAK,EACL,OAAO,EACP,kBAAkB,CACnB,CAAA;IACP,OAAO,IAAI,yBAAW,CACpB,gBAAgB,EAChB,KAAK,EACL,cAAc,EACd,kBAAkB,EAClB,OAAO,CACR,CAAA;AACH,CAAC;AAvCD,kCAuCC","sourcesContent":["import { EventEmitter } from 'node:events'\nimport { IdGenerator } from '@cucumber/messages'\nimport { IRunEnvironment, IRunOptionsRuntime } from '../api'\nimport { ILogger } from '../logger'\nimport { SourcedPickle } from '../assemble'\nimport { SupportCodeLibrary } from '../support_code_library_builder/types'\nimport { Runtime, RuntimeAdapter } from './types'\nimport { ChildProcessAdapter } from './parallel/adapter'\nimport { InProcessAdapter } from './serial/adapter'\nimport { Coordinator } from './coordinator'\n\nexport async function makeRuntime({\n  environment,\n  logger,\n  eventBroadcaster,\n  sourcedPickles,\n  newId,\n  supportCodeLibrary,\n  options,\n}: {\n  environment: IRunEnvironment\n  logger: ILogger\n  eventBroadcaster: EventEmitter\n  newId: IdGenerator.NewId\n  sourcedPickles: ReadonlyArray<SourcedPickle>\n  supportCodeLibrary: SupportCodeLibrary\n  options: IRunOptionsRuntime\n}): Promise<Runtime> {\n  const adapter: RuntimeAdapter =\n    options.parallel > 0\n      ? new ChildProcessAdapter(\n          environment,\n          logger,\n          eventBroadcaster,\n          options,\n          supportCodeLibrary\n        )\n      : new InProcessAdapter(\n          eventBroadcaster,\n          newId,\n          options,\n          supportCodeLibrary\n        )\n  return new Coordinator(\n    eventBroadcaster,\n    newId,\n    sourcedPickles,\n    supportCodeLibrary,\n    adapter\n  )\n}\n"]}
var _ = require('lodash')
const fs = require('fs');
var cities = require('./cities.json')
var countries = require('./src/data.json')

const newData = Object.values(countries).reduce((soFar, value) => {
  soFar[value.id] = {
    ...value,
    cities: _.uniq(cities[value.name])
  }

  return soFar
}, {})

fs.writeFile("data.json", JSON.stringify(newData), function(err) {
  if(err) {
    console.log(err);
  }

  console.log("The file was saved!");
}); 
